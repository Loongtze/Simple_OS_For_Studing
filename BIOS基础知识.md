## 0x00 开机
大家都知道，开机时咱们得首先得将操作系统载入内存RAM区才可以继续我们的工作，但是咱们操作系统都没运行，那我们是如何实现加载这一过程呢，难道说是妥妥的灵异事件？
其实并非如此，咱们是不是忘了还有个磁盘呢，而且不要认为没操作系统就无法运行程序，实际上操作系统只是给咱们提供了一个方便运行程序的环境，如果没有操作系统程序也是可以执行的，因为程序执行只需要简单的两个元素，指令序列以及CPU按序列执行即可，只不过没操作系统你可能实现函数十分繁琐，也就比如说虚拟地址与物理地址的映射，但是这种情况在早期没有保护模式这一概念时，程序员们也确实是直接运用物理地址进行编程。何况还有更早的程序员打纸孔带呢(

---
现在来回答刚刚的问题，那就是开机如何加载呢，首先给出一个答案，开机后咱们地一个需要运行的程序是位于磁盘的BIOS程序：
## 0x01 软件接力第一棒，BIOS
BIOS全称为 Base Input & Output System,也即基本输入输出系统,他的主要工作那就是基本输入输出了(手动狗头
### 1. 实模式
实模式是什么呢，简单粗暴来讲那就是哥们只用物理地址的模式，因为最开始开机时还不存在页表，更不存在页映射一说，所以咱们最开始的地址只能通过物理地址来进行编程，并且此时编程也只能用汇编。
而在Intel 8086时期只有20条地址线，也就是说若按字节寻址的话咱们的发挥空间就只有1MB，用16进制表示就是从0x00000到0xFFFFF，以下我先给出实模式下的地址分布：
|开始地址|结束地址|大小|用途|
|--|--|--|--|
|FFFF0|FFFFF|16B|BIOS入口，这么小的一个位置实际上仅仅是一个跳转指令|
|F0000|FFFEF|64KB-16B|系统BIOS|
|C8000|EFFFF|160KB|映射硬件适配器的ROM或内存映射式I/O|
|C0000|C7FFF|32KB|显示适配器BIOS|
|B8000|BFFFF|32KB|文本显示适配器|
|B0000|B7FFF|32KB|黑白显示适配器|
|A0000|AFFFF|64KB|彩色显示适配器|
|9FC00|9FFFF|1KB|EBDA|
|7E00|9FBFF|约608KB|可用|
|7C00|7DFF|512B|MBR加载地址|
|500|7BFF|约30KB|可用|
|400|4ff|256B|BIOS数据区域|
|000|3FF|1KB|中断向量表|

---
### 2. BIOS
从上表也可以直观的看出来，在0xF0000~0xFFFFF这儿的64KB就保存的BIOS代码，而BIOS的功能就是检测初始化硬件。但是具体是如何初始化呢，硬件自身会实现一些初始化的功能调用，这里BIOS直接调用即可，就跟咱们高级程序调库类似，但是BIOS面向的是硬件，而咱们面向的是操作系统或者说是程序员自己实现的库。
除了上述功能BIOS还做了一个伟大的事，那就是建立中断向量表，这样咱们就可以通过"int 中断号"来进行硬件调用（每次看到这个int我都想到int 0x80哈哈哈，来自pwner奇奇怪怪的直觉）
但是我们这里还得清楚一件事情，那就是BIOS是放哪儿的,这里直接说答案，他是存放在内存ROM区中，学过机组的伙伴可能知道主存一般分为RAM和ROM，其中RAM大多由DRAM这种存储器构成，但是他是断电就消失，并且他要保持数据必须一定时间内还要不断刷新行，所以咱们的BIOS不能放到rAM中，但是ROM断电是不会消失的，就像刻光盘一样刻上面了，所以咱们的BIOS是放在ROM区中的。
   
而BIOS其实也是指令流，也是个程序，所以肯定也得有入口地址，这个入口地址便是0xFFFF0,
